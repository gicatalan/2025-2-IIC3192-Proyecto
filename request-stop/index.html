<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lamp</title>
  </head>
  <body>
    <script src="https://app.protobject.com/framework/p.js"></script>
    <script src="config.js"></script>
    
    <h1 style="font-family:sans-serif; text-align:center; margin-top:20px">This is the lamp</h1>
    <script>
      const lamp = new Protobject.Lamp({
        width: "calc(100% - 160px)",
        height: "calc(100% - 160px)",
        top: "80px",
        left: "80px",
        zIndex: 5,
        borderRadius: "20px"
      });

      // PRUEBA DIFERENTES MÃ‰TODOS DE RECEPCIÃ“N:

      // MÃ©todo 1: onReceived (el que tenÃ­as originalmente)
      Protobject.Core.onReceived(function (message) {
        console.log("ðŸ“© onReceived message:", message);
        if (message) {
          console.log("ðŸŸ¢ Turning lamp ON");
          lamp.setColor({ r: 0, g: 255, b: 0 });
        } else {
          console.log("ðŸ”´ Turning lamp OFF");
          lamp.setColor({ r: 0, g: 0, b: 0 });
        }
      });

      // MÃ©todo 2: onMessage (por si acaso)
      if (Protobject.Core.onMessage) {
        Protobject.Core.onMessage(function (message) {
          console.log("ðŸ“© onMessage received:", message);
        });
      }

      // MÃ©todo 3: Event listener
      Protobject.Core.addEventListener('message', function (event) {
        console.log("ðŸ“© Event message:", event.detail);
      });

      // Para debug
      Protobject.Core.onConnected(() => {
        console.log("âœ… Lamp connected to namespace");
      });

      // Debug: Verificar mÃ©todos disponibles
      console.log("MÃ©todos Core disponibles en Lamp:", Object.keys(Protobject.Core));
    </script>
  </body>
  <style>
    #ProtobjectPlusButton {
      width: 80px !important;
    }
    #ProtobjectPlusButton:after {
      content: " Connect";
    }
  </style>
</html>